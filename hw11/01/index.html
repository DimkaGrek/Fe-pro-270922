<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homework 11 - 01</title>
    <script>
        window.onload = () => {
            let nickName = document.querySelector('#nickname');
            let email = document.querySelector('#email');
            let phone = document.querySelector('#phone');
            let btn = document.getElementById('btn');
            let patternNick = /^\w{2,}$/;
            // dificult version
            // let patternEmail = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            let patternEmail = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/; // easy version
            //let patternEmail = /(\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)/; // easy version
            let patternPhone = /^[+]380\d{9}$/;
            btn.onclick = function (e) {
                e.preventDefault();
                let formIsOk = true;
                if (!patternNick.test(nickName.value)) {
                    nickName.style.backgroundColor = 'red';
                    formIsOk = false;
                }
                if (!patternEmail.test(email.value)) {
                    email.style.backgroundColor = 'red';
                    formIsOk = false;
                }
                let PhoneToNormal = phone.value.replace(/[^+0-9]/g, '');
                phone.value = PhoneToNormal;
                if(!patternPhone.test(PhoneToNormal)) {
                    phone.style.backgroundColor = 'red';
                    formIsOk = false;
                }
                if (formIsOk) alert ('All fields are OK!');
            }
            nickName.onfocus = function() {
                nickName.style.backgroundColor = 'unset';
            }
            email.onfocus = function() {
                email.style.backgroundColor = 'unset';
            }
            phone.onfocus = function() {
                phone.style.backgroundColor = 'unset';
            }
            phone.oninput = function() {
                phone.value = phone.value.replace(/[^+0-9]/g, '');
            }
        }
    </script>
</head>
<body>
    <form action="#">
        <label for="nickname">Nickname</label><br>
        <input type="text" name="nickname" id="nickname"><br><br>
        <label for="email">Email</label><br>
        <input type="text" name="email" id="email"><br><br>
        <label for="phone">Phone</label><br>
        <input type="text" name="phone" id="phone"><br><br>
        <input type="submit" name="submit" value="Send" id="btn">
    </form>
</body>
</html>